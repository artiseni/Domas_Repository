"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.cleanGlobPatterns = void 0;
const core_1 = require("@tsed/core");
const path_1 = require("path");
function isTsEnv() {
    return ((require && require.extensions && require.extensions[".ts"]) ||
        process.env["TS_TEST"] ||
        process.env.JEST_WORKER_ID !== undefined ||
        process.env.NODE_ENV === "test");
}
function mapExcludes(excludes) {
    return excludes.map((s) => `!${s.replace(/!/gi, "")}`);
}
function mapExtensions(file) {
    if (!isTsEnv()) {
        file = file.replace(/\.ts$/i, ".js").replace(/{\.ts,\.js}$/i, ".js");
    }
    return file;
}
function cleanGlobPatterns(files, excludes) {
    return []
        .concat(files)
        .map((s) => path_1.resolve(s))
        .concat(mapExcludes(excludes))
        .map(mapExtensions)
        .map((s) => core_1.normalizePath(s));
}
exports.cleanGlobPatterns = cleanGlobPatterns;
//# sourceMappingURL=cleanGlobPatterns.js.map