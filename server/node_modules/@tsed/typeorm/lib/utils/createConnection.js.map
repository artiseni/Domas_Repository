{"version":3,"file":"createConnection.js","sourceRoot":"","sources":["../../src/utils/createConnection.ts"],"names":[],"mappings":";;;AAAA,qCAAoC;AACpC,qCAA4E;AAErE,KAAK,UAAU,gBAAgB,CAAC,iBAAoC;IACzE,MAAM,iBAAiB,GAAG,8BAAoB,EAAE,CAAC;IACjD,MAAM,IAAI,GAAG,eAAQ,CAAS,iBAAiB,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;IAEpE,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;QAChC,MAAM,UAAU,GAAG,iBAAiB,CAAC,MAAM,CAAC,iBAAkB,CAAC,CAAC;QAChE,MAAM,UAAU,CAAC,OAAO,EAAE,CAAC;KAC5B;IAED,MAAM,UAAU,GAAG,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAE/C,OAAO,UAAU,CAAC;AACpB,CAAC;AAZD,4CAYC","sourcesContent":["import {getValue} from \"@tsed/core\";\nimport {Connection, ConnectionOptions, getConnectionManager} from \"typeorm\";\n\nexport async function createConnection(connectionOptions: ConnectionOptions): Promise<Connection> {\n  const connectionManager = getConnectionManager();\n  const name = getValue<string>(connectionOptions, \"name\", \"default\");\n\n  if (!connectionManager.has(name)) {\n    const connection = connectionManager.create(connectionOptions!);\n    await connection.connect();\n  }\n\n  const connection = connectionManager.get(name);\n\n  return connection;\n}\n"]}